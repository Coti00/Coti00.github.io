{{ $items := where site.RegularPages "File.Dir" "in" (slice "/sliderfile/patience/" "/sliderfile/passion/" "/sliderfile/adaptation/") | default (slice) }}
{{ $slide_count := len $items }}

{{ if gt $slide_count 0 }}
<div id="imageSlider" class="carousel slide" data-ride="carousel">
    <!-- Indicators (슬라이드 하단의 인디케이터 버튼) -->
    {{ if gt $slide_count 1 }}
    <ol class="carousel-indicators">
      {{ range $index, $item := $items }}
        <li data-target="#imageSlider" data-slide-to="{{ $index }}" class="{{ if eq $index 0 }}active{{ end }}"></li>
      {{ end }}
    </ol>
    {{ end }}

    <!-- Slides -->
    <div class="carousel-inner">
      {{ range $index, $item := $items }}
      <div class="carousel-item {{ if eq $index 0 }}active{{ end }}">
        {{ $link := $item.RelPermalink }}
        {{ $target := "" }}
        {{ if $item.Params.external_link }}
          {{ $link = $item.Params.external_link }}
          {{ $target = "target=\"_blank\" rel=\"noopener\"" }}
        {{ end }}

        {{ $resource := $item.Resources.GetMatch "featured.*" }}
        {{ $anchor := $item.Params.image.focal_point | default "Center" }}

        <a href="{{ $link }}" {{ $target | safeHTMLAttr }}>
          <div class="relative overflow-hidden w-full" style="height: 300px;">
            {{ with $resource }}
              {{ $image := .Fill (printf "1200x300 %s" $anchor) }}
              {{ if ne $image.MediaType.SubType "gif" }}{{ $image = $image.Process "webp" }}{{ end }}
              <!-- 이미지가 배경으로 들어가고, 높이 300px, 넓이 100% -->
              <img class="h-full w-full object-cover hover:scale-110 transition duration-500 cursor-pointer" loading="lazy" src="{{ $image.RelPermalink }}" alt="{{ $item.Title | plainify }}">
            {{ else }}
              <!-- 이미지가 없을 경우 기본 배경 색상 -->
              <div class="h-full w-full object-cover hover:scale-110 transition duration-500 cursor-pointer bg-gray-200 text-center text-xl flex items-center justify-center">
                No Image Available
              </div>
            {{ end }}

            <!-- 텍스트 오버레이 -->
            <div class="absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 hover:bg-opacity-75 transition duration-300" style="border-radius: 15px;">
              <div class="text-white text-center">
                <h2 class="text-xl md:text-2xl lg:text-3xl font-semibold">
                  {{ $item.Title }}
                </h2>
                <p class="mt-2 text-lg md:text-xl lg:text-2xl">
                  {{ $item.Params.description | default "" }}
                </p>
              </div>
            </div>
          </div>
        </a>
      </div>
      {{ end }}
    </div>

    <!-- Left and right controls (이전/다음 슬라이드 버튼) -->
    {{ if gt $slide_count 1 }}
    <a class="carousel-control-prev" href="#imageSlider" role="button" data-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#imageSlider" role="button" data-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
    {{ end }}
</div>
{{ end }}
